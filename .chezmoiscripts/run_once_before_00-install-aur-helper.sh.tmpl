{{- if and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.id "arch") -}}
#!/bin/bash
set -euo pipefail

if ! command -v yay &> /dev/null && ! command -v paru &> /dev/null; then
    echo "Installing yay (AUR helper)..."
    sudo pacman -S --needed --noconfirm git base-devel
    temp_dir=$(mktemp -d)
    git clone https://aur.archlinux.org/yay-bin.git "$temp_dir/yay-bin"
    cd "$temp_dir/yay-bin"
    makepkg -si --noconfirm
    cd -
    rm -rf "$temp_dir"
    echo "yay installed successfully."
else
    echo "AUR helper already installed."
fi
{{ end -}}
