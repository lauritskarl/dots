{{- if eq .chezmoi.os "windows" -}}
$ErrorActionPreference = "Stop"

# Refresh PATH to pick up newly installed Scoop packages
$env:Path = [System.Environment]::GetEnvironmentVariable("Path","Machine") + ";" + [System.Environment]::GetEnvironmentVariable("Path","User")

if (Get-Command mise -ErrorAction SilentlyContinue) {
    Write-Host "Running mise install..."
    mise install --yes
} else {
    Write-Host "mise not found, skipping mise install"
}
{{ end -}}
